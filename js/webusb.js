!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);var i;!function(e){const t="BlazorExtensions",n={WebUSB:new r.USBManager};e.initialize=function(){"undefined"==typeof window||window[t]?window[t]=Object.assign(Object.assign({},window[t]),n):window[t]=Object.assign({},n)}}(i||(i={})),i.initialize()},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{a(r.next(e))}catch(e){o(e)}}function c(e){try{a(r.throw(e))}catch(e){o(e)}}function a(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(s,c)}a((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2);t.USBManager=class{constructor(){this.usb=navigator.usb,this._usbReference=void 0,this._foundDevices=[],this._eventsRegistered=!1,this.GetDevices=(()=>r(this,void 0,void 0,function*(){let e=yield this.usb.getDevices(),t=[];return e&&e.forEach(e=>{t.push(i.ParseUSBDevice(e)),this._foundDevices.push(e)}),t})),this.RequestDevice=(e=>r(this,void 0,void 0,function*(){let t=[],n=void 0;e&&null!=e&&e.filters&&null!=e.filters&&e.filters.length>0?(e.filters.forEach(e=>{let n={};Object.keys(e).forEach(t=>{null!=e[t]&&(n[t]=e[t])}),function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(n)||t.push(n)}),t.length>0&&(n={filters:t})):n={filters:[]};let r=yield this.usb.requestDevice(n),o=i.ParseUSBDevice(r);return this._foundDevices.push(r),o})),this.OpenDevice=(e=>{let t=this.GetUSBDevice(e);return new Promise((e,n)=>{if(!t)return n("Device not connected");t.open().then(()=>{let n=i.ParseUSBDevice(t);console.log(n),e(n)}).catch(e=>n(e))})}),this.CloseDevice=(e=>{let t=this.GetUSBDevice(e);return new Promise((e,n)=>{if(!t)return n("Device not connected");t.close().then(()=>{e(i.ParseUSBDevice(t))}).catch(e=>n(e))})}),this.ResetDevice=(e=>{let t=this.GetUSBDevice(e);return new Promise((e,n)=>{if(!t)return n("Device not connected");t.reset().then(()=>{e(i.ParseUSBDevice(t))}).catch(e=>n(e))})}),this.SelectConfiguration=((e,t)=>{let n=this.GetUSBDevice(e);return new Promise((e,r)=>{if(!n)return r("Device not connected");console.log(t),n.selectConfiguration(t).then(()=>{e(i.ParseUSBDevice(n))}).catch(e=>r(e))})}),this.ClaimInterface=((e,t)=>{let n=this.GetUSBDevice(e);return new Promise((e,r)=>{if(!n)return r("Device not connected");n.claimInterface(t).then(()=>{e(i.ParseUSBDevice(n))}).catch(e=>r(e))})}),this.ReleaseInterface=((e,t)=>{let n=this.GetUSBDevice(e);return new Promise((e,r)=>{if(!n)return r("Device not connected");n.releaseInterface(t).then(()=>{e(i.ParseUSBDevice(n))}).catch(e=>r(e))})}),this.SelectAlternateInterface=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,o)=>{if(!r)return o("Device not connected");r.selectAlternateInterface(t,n).then(()=>{e(i.ParseUSBDevice(r))}).catch(e=>o(e))})}),this.ClearHalt=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,o)=>{if(!r)return o("Device not connected");r.clearHalt(t,n).then(()=>{e(i.ParseUSBDevice(r))}).catch(e=>o(e))})}),this.TransferIn=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,i)=>{if(!r)return i("Device not connected");r.transferIn(t,n).then(t=>{e({data:this.BufferToBase64(Array.prototype.slice.call(new Uint8Array(t.data.buffer))),status:t.status})}).catch(e=>{console.error(e),i(e)})})}),this.TransferOut=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,i)=>{if(!r)return i("Device not connected");const o=this.Base64ToBuffer(n);r.transferOut(t,o).then(t=>{e({bytesWritten:t.bytesWritten,status:t.status})}).catch(e=>{console.error(e),i(e)})})}),this.ControlTransferIn=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,i)=>{if(!r)return i("Device not connected");r.ControlTransferIn(t,n).then(t=>{e({data:this.BufferToBase64(Array.prototype.slice.call(new Uint8Array(t.data.buffer))),status:t.status})}).catch(e=>{console.error(e),i(e)})})}),this.ControlTransferOut=((e,t,n)=>{let r=this.GetUSBDevice(e);return new Promise((e,i)=>{if(!r)return i("Device not connected");const o=this.Base64ToBuffer(n);r.controlTransferOut(t,o).then(t=>{console.log(t),e({bytesWritten:t.bytesWritten,status:t.status})}).catch(e=>{console.error(e),i(e)})})}),this.GetUSBDevice=(e=>this._foundDevices.find(t=>t.vendorId==e.vendorId&&t.productId==e.productId&&t.deviceClass==e.deviceClass&&t.serialNumber==e.serialNumber)),this.ConnectionStateChangedCallback=(e=>{if(!this._usbReference)return;let t="",n=this.GetUSBDevice(e.device);if("disconnect"==e.type)t="OnDisconnect",this._foundDevices=this._foundDevices.filter((e,t,r)=>e.vendorId!=n.vendorId&&e.productId!=n.productId&&e.deviceClass!=n.deviceClass&&e.serialNumber!=n.serialNumber);else{if("connect"!=e.type)return void console.warn(e);t="OnConnect"}this._usbReference.invokeMethodAsync(t,i.ParseUSBDevice(e.device))}),this.RegisterUSBEvents=(e=>{this._usbReference=e,this._eventsRegistered||(this.usb.addEventListener("connect",this.ConnectionStateChangedCallback),this.usb.addEventListener("disconnect",this.ConnectionStateChangedCallback),this._eventsRegistered=!0)}),this.RemoveUSBEvents=(e=>{this._eventsRegistered&&(this.usb.removeEventListener("connect",this.ConnectionStateChangedCallback),this.usb.removeEventListener("disconnect",this.ConnectionStateChangedCallback))}),this.BufferToBase64=(e=>{var t=Array.prototype.map.call(e,e=>String.fromCharCode(e)).join("");return btoa(t)}),this.Base64ToBuffer=(e=>{var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(t,(e,t)=>{n[t]=e.charCodeAt(0)}),n})}}},function(e,t,n){"use strict";function r(e){return{configurationValue:e.configurationValue,configurationName:e.configurationName,interfaces:e.interfaces.map(e=>(function(e){return{interfaceNumber:e.interfaceNumber,alternate:e.alternate?i(e.alternate):null,alternates:e.alternates.map(e=>i(e)),claimed:e.claimed}})(e))}}function i(e){return{alternateSetting:e.alternateSetting,interfaceClass:e.interfaceClass,interfaceSubclass:e.interfaceSubclass,interfaceProtocol:e.interfaceProtocol,interfaceName:e.interfaceName,endpoints:e.endpoints.map(e=>(function(e){return{endpointNumber:e.endpointNumber,direction:e.direction,type:e.type,packetSize:e.packetSize}})(e))}}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.in=0]="in",e[e.out=1]="out"}(t.USBDirection||(t.USBDirection={})),function(e){e[e.bulk=0]="bulk",e[e.interrupt=1]="interrupt",e[e.isochronous=2]="isochronous"}(t.USBEndpointType||(t.USBEndpointType={})),function(e){e[e.ok=0]="ok",e[e.stall=1]="stall",e[e.babble=2]="babble"}(t.USBTransferStatus||(t.USBTransferStatus={})),function(e){e[e.standard=0]="standard",e[e.class=1]="class",e[e.vendor=2]="vendor"}(t.USBRequestType||(t.USBRequestType={})),function(e){e[e.device=0]="device",e[e.interface=1]="interface",e[e.endpoint=2]="endpoint",e[e.other=3]="other"}(t.USBRecipient||(t.USBRecipient={})),t.ParseUSBDevice=function(e){return{usbVersionMajor:e.usbVersionMajor,usbVersionMinor:e.usbVersionMinor,usbVersionSubminor:e.usbVersionSubminor,deviceClass:e.deviceClass,deviceSubclass:e.deviceSubclass,deviceProtocol:e.deviceProtocol,vendorId:e.vendorId,productId:e.productId,deviceVersionMajor:e.deviceVersionMajor,deviceVersionMinor:e.deviceVersionMinor,deviceVersionSubminor:e.deviceVersionSubminor,manufacturerName:e.manufacturerName,productName:e.productName,serialNumber:e.serialNumber,configuration:null!=e.configuration?r(e.configuration):null,configurations:e.configurations.map(e=>r(e)),opened:e.opened}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0luaXRpYWxpemVXZWJVU0IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1VTQk1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1VTQlR5cGVzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVVNCTWFuYWdlcl8xIiwiV2ViVVNCIiwiYmxhem9yRXh0ZW5zaW9ucyIsImV4dGVuc2lvbk9iamVjdCIsIlVTQk1hbmFnZXIiLCJpbml0aWFsaXplIiwid2luZG93IiwiYXNzaWduIiwiVVNCVHlwZXNfMSIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJ1c2IiLCJuYXZpZ2F0b3IiLCJfdXNiUmVmZXJlbmNlIiwidW5kZWZpbmVkIiwiX2ZvdW5kRGV2aWNlcyIsIl9ldmVudHNSZWdpc3RlcmVkIiwiR2V0RGV2aWNlcyIsIl9fYXdhaXRlciIsImRldmljZXMiLCJnZXREZXZpY2VzIiwiZm91bmQiLCJmb3JFYWNoIiwicHVzaCIsIlBhcnNlVVNCRGV2aWNlIiwiUmVxdWVzdERldmljZSIsIm9wdGlvbnMiLCJmaWx0ZXJzIiwicmVxT3B0aW9ucyIsImxlbmd0aCIsImYiLCJmaWx0ZXIiLCJrZXlzIiwib2JqIiwicHJvcCIsImlzRW1wdHkiLCJhdXRob3JpemVkRGV2aWNlIiwicmVxdWVzdERldmljZSIsInVzYkRldmljZSIsIk9wZW5EZXZpY2UiLCJkZXZpY2UiLCJHZXRVU0JEZXZpY2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsIm9wZW4iLCJ0aGVuIiwicGFyc2VkIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyIiwiQ2xvc2VEZXZpY2UiLCJjbG9zZSIsIlJlc2V0RGV2aWNlIiwicmVzZXQiLCJTZWxlY3RDb25maWd1cmF0aW9uIiwiY29uZmlndXJhdGlvblZhbHVlIiwic2VsZWN0Q29uZmlndXJhdGlvbiIsIkNsYWltSW50ZXJmYWNlIiwiaW50ZXJmYWNlTnVtYmVyIiwiY2xhaW1JbnRlcmZhY2UiLCJSZWxlYXNlSW50ZXJmYWNlIiwicmVsZWFzZUludGVyZmFjZSIsIlNlbGVjdEFsdGVybmF0ZUludGVyZmFjZSIsImFsdGVybmF0ZVNldHRpbmciLCJzZWxlY3RBbHRlcm5hdGVJbnRlcmZhY2UiLCJDbGVhckhhbHQiLCJkaXJlY3Rpb24iLCJlbmRwb2ludE51bWJlciIsImNsZWFySGFsdCIsIlRyYW5zZmVySW4iLCJ0cmFuc2ZlckluIiwib3V0IiwiZGF0YSIsIkJ1ZmZlclRvQmFzZTY0IiwiQXJyYXkiLCJzbGljZSIsIlVpbnQ4QXJyYXkiLCJidWZmZXIiLCJzdGF0dXMiLCJlcnJvciIsIlRyYW5zZmVyT3V0IiwiQmFzZTY0VG9CdWZmZXIiLCJ0cmFuc2Zlck91dCIsImJ5dGVzV3JpdHRlbiIsIkNvbnRyb2xUcmFuc2ZlckluIiwic2V0dXAiLCJDb250cm9sVHJhbnNmZXJPdXQiLCJjb250cm9sVHJhbnNmZXJPdXQiLCJmaW5kIiwidmVuZG9ySWQiLCJwcm9kdWN0SWQiLCJkZXZpY2VDbGFzcyIsInNlcmlhbE51bWJlciIsIkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWRDYWxsYmFjayIsImV2ZW50IiwibWV0aG9kIiwidHlwZSIsImluZGV4IiwiYXJyIiwid2FybiIsImludm9rZU1ldGhvZEFzeW5jIiwiUmVnaXN0ZXJVU0JFdmVudHMiLCJhZGRFdmVudExpc3RlbmVyIiwiUmVtb3ZlVVNCRXZlbnRzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJ1ZiIsImJpbnN0ciIsIm1hcCIsImNoIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiam9pbiIsImJ0b2EiLCJiYXNlNjQiLCJhdG9iIiwiY2hhckNvZGVBdCIsIlBhcnNlVVNCQ29uZmlndXJhdGlvbiIsInJhd0NvbmZpZ3VyYXRpb24iLCJjb25maWd1cmF0aW9uTmFtZSIsImludGVyZmFjZXMiLCJyYXciLCJyYXdJbnRlcmZhY2UiLCJhbHRlcm5hdGUiLCJQYXJzZVVTQkFsdGVybmF0ZUludGVyZmFjZSIsImFsdGVybmF0ZXMiLCJjbGFpbWVkIiwiUGFyc2VVU0JJbnRlcmZhY2UiLCJyYXdBbHRlcm5hdGUiLCJpbnRlcmZhY2VDbGFzcyIsImludGVyZmFjZVN1YmNsYXNzIiwiaW50ZXJmYWNlUHJvdG9jb2wiLCJpbnRlcmZhY2VOYW1lIiwiZW5kcG9pbnRzIiwicmF3RW5kcG9pbnQiLCJwYWNrZXRTaXplIiwiUGFyc2VVU0JFbmRwb2ludCIsIlVTQkRpcmVjdGlvbiIsIlVTQkVuZHBvaW50VHlwZSIsIlVTQlRyYW5zZmVyU3RhdHVzIiwiVVNCUmVxdWVzdFR5cGUiLCJVU0JSZWNpcGllbnQiLCJyYXdEZXZpY2UiLCJ1c2JWZXJzaW9uTWFqb3IiLCJ1c2JWZXJzaW9uTWlub3IiLCJ1c2JWZXJzaW9uU3VibWlub3IiLCJkZXZpY2VTdWJjbGFzcyIsImRldmljZVByb3RvY29sIiwiZGV2aWNlVmVyc2lvbk1ham9yIiwiZGV2aWNlVmVyc2lvbk1pbm9yIiwiZGV2aWNlVmVyc2lvblN1Ym1pbm9yIiwibWFudWZhY3R1cmVyTmFtZSIsInByb2R1Y3ROYW1lIiwiY29uZmlndXJhdGlvbiIsImNvbmZpZ3VyYXRpb25zIiwib3BlbmVkIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFB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QkFBU0EsSUFBQSxtQkFBbEQsQ0FBWS9LLEVBQUErSyxpQkFBQS9LLEVBQUErSyxvQkFDWixTQUFZQyxHQUFlQSxJQUFBLG1CQUFVQSxJQUFBLHlCQUFhQSxJQUFBLHVCQUFZQSxJQUFBLGlCQUE5RCxDQUFZaEwsRUFBQWdMLGVBQUFoTCxFQUFBZ0wsa0JBRVpoTCxFQUFBMEQsZUFBQSxTQUErQnVILEdBQzNCLE9BQ0lDLGdCQUFpQkQsRUFBVUMsZ0JBQzNCQyxnQkFBaUJGLEVBQVVFLGdCQUMzQkMsbUJBQW9CSCxFQUFVRyxtQkFDOUJyRCxZQUFha0QsRUFBVWxELFlBQ3ZCc0QsZUFBZ0JKLEVBQVVJLGVBQzFCQyxlQUFnQkwsRUFBVUssZUFDMUJ6RCxTQUFVb0QsRUFBVXBELFNBQ3BCQyxVQUFXbUQsRUFBVW5ELFVBQ3JCeUQsbUJBQW9CTixFQUFVTSxtQkFDOUJDLG1CQUFvQlAsRUFBVU8sbUJBQzlCQyxzQkFBdUJSLEVBQVVRLHNCQUNqQ0MsaUJBQWtCVCxFQUFVUyxpQkFDNUJDLFlBQWFWLEVBQVVVLFlBQ3ZCM0QsYUFBY2lELEVBQVVqRCxhQUN4QjRELGNBQTBDLE1BQTNCWCxFQUFVVyxjQUF3QnBDLEVBQXNCeUIsRUFBVVcsZUFBaUIsS0FDbEdDLGVBQWdCWixFQUFVWSxlQUFlOUMsSUFBSWEsR0FBT0osRUFBc0JJLElBQzFFa0MsT0FBUWIsRUFBVWEiLCJmaWxlIjoid2VidXNiLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHsgVVNCTWFuYWdlciB9IGZyb20gXCIuL1VTQk1hbmFnZXJcIjtcblxubmFtZXNwYWNlIFdlYlVTQiB7XG4gICAgY29uc3QgYmxhem9yRXh0ZW5zaW9uczogc3RyaW5nID0gJ0JsYXpvckV4dGVuc2lvbnMnO1xuICAgIC8vIGRlZmluZSB3aGF0IHRoaXMgZXh0ZW5zaW9uIGFkZHMgdG8gdGhlIHdpbmRvdyBvYmplY3QgaW5zaWRlIEJsYXpvckV4dGVuc2lvbnNcbiAgICBjb25zdCBleHRlbnNpb25PYmplY3QgPSB7XG4gICAgICAgIFdlYlVTQjogbmV3IFVTQk1hbmFnZXIoKVxuICAgIH07XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICF3aW5kb3dbYmxhem9yRXh0ZW5zaW9uc10pIHtcbiAgICAgICAgICAgIC8vIHdoZW4gdGhlIGxpYnJhcnkgaXMgbG9hZGVkIGluIGEgYnJvd3NlciB2aWEgYSA8c2NyaXB0PiBlbGVtZW50LCBtYWtlIHRoZVxuICAgICAgICAgICAgLy8gZm9sbG93aW5nIEFQSXMgYXZhaWxhYmxlIGluIGdsb2JhbCBzY29wZSBmb3IgaW52b2NhdGlvbiBmcm9tIEpTXG4gICAgICAgICAgICB3aW5kb3dbYmxhem9yRXh0ZW5zaW9uc10gPSB7XG4gICAgICAgICAgICAgICAgLi4uZXh0ZW5zaW9uT2JqZWN0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2luZG93W2JsYXpvckV4dGVuc2lvbnNdID0ge1xuICAgICAgICAgICAgICAgIC4uLndpbmRvd1tibGF6b3JFeHRlbnNpb25zXSxcbiAgICAgICAgICAgICAgICAuLi5leHRlbnNpb25PYmplY3RcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbldlYlVTQi5pbml0aWFsaXplKCk7IiwiaW1wb3J0IHsgVVNCRGV2aWNlRm91bmQsIFVTQlJlcXVlc3REZXZpY2VPcHRpb25zLCBQYXJzZVVTQkRldmljZSwgVVNCQ29uZmlndXJhdGlvbiwgVVNCSW50ZXJmYWNlLCBVU0JEaXJlY3Rpb24sIFVTQkluVHJhbnNmZXJSZXN1bHQsIFVTQk91dFRyYW5zZmVyUmVzdWx0LCBVU0JUcmFuc2ZlclN0YXR1cywgVVNCQ29udHJvbFRyYW5zZmVyUGFyYW1ldGVycyB9IGZyb20gXCIuL1VTQlR5cGVzXCI7XHJcblxyXG50eXBlIERvdE5ldFJlZmVyZW5jZVR5cGUgPSB7XHJcbiAgaW52b2tlTWV0aG9kPFQ+KG1ldGhvZElkZW50aWZpZXI6IHN0cmluZywgLi4uYXJnczogYW55W10pOiBULFxyXG4gIGludm9rZU1ldGhvZEFzeW5jPFQ+KG1ldGhvZElkZW50aWZpZXI6IHN0cmluZywgLi4uYXJnczogYW55W10pOiBQcm9taXNlPFQ+XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBVU0JNYW5hZ2VyIHtcclxuICBwcml2YXRlIHVzYjogYW55ID0gKDxhbnk+bmF2aWdhdG9yKS51c2I7IC8vIFRoZSBXZWJVU0IgQVBJIHJvb3Qgb2JqZWN0XHJcbiAgcHJpdmF0ZSBfdXNiUmVmZXJlbmNlOiBEb3ROZXRSZWZlcmVuY2VUeXBlIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xyXG4gIC8vIEFsbCBkZXZpY2VzIGZvdW5kIG9uIHRoZSBsYXN0IHJlcXVlc3RcclxuICAvLyBXZSBrZWVwIGEgbGlzdCBvZiB0aGUgbW9zdCByZWNlbnQgb2JqZWN0IGJlY2F1c2Ugd2UgY2FuJ3Qgc2VyaWFsaXplIHRoZSBcInJlYWxcIiBVU0JEZXZpY2UgdG8gc2VuZCBiYWNrIHRvIEMjXHJcbiAgLy8gVE9ETzogRmluZCBhIGJldHRlciB3YXkgdG8gbWFpbnRhaW4gaXQgYW5kIGtlZXAgY29uc2lzdGVudCB3aXRoIHRoZSBDIyBzaWRlLi4uXHJcbiAgcHJpdmF0ZSBfZm91bmREZXZpY2VzOiBhbnlbXSA9IFtdO1xyXG4gIHByaXZhdGUgX2V2ZW50c1JlZ2lzdGVyZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgcHVibGljIEdldERldmljZXMgPSBhc3luYyAoKTogUHJvbWlzZTxVU0JEZXZpY2VGb3VuZFtdPiA9PiB7XHJcbiAgICBsZXQgZGV2aWNlcyA9IGF3YWl0IHRoaXMudXNiLmdldERldmljZXMoKTtcclxuICAgIGxldCBmb3VuZDogVVNCRGV2aWNlRm91bmRbXSA9IFtdO1xyXG4gICAgaWYgKGRldmljZXMpIHtcclxuICAgICAgZGV2aWNlcy5mb3JFYWNoKGQgPT4ge1xyXG4gICAgICAgIGZvdW5kLnB1c2goUGFyc2VVU0JEZXZpY2UoZCkpO1xyXG4gICAgICAgIHRoaXMuX2ZvdW5kRGV2aWNlcy5wdXNoKGQpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBmb3VuZDtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBSZXF1ZXN0RGV2aWNlID0gYXN5bmMgKG9wdGlvbnM6IFVTQlJlcXVlc3REZXZpY2VPcHRpb25zKTogUHJvbWlzZTxVU0JEZXZpY2VGb3VuZD4gPT4ge1xyXG4gICAgZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGZpbHRlcnM6IGFueVtdID0gW107XHJcbiAgICBsZXQgcmVxT3B0aW9uczogYW55ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMgIT0gbnVsbCAmJiBvcHRpb25zLmZpbHRlcnMgJiYgb3B0aW9ucy5maWx0ZXJzICE9IG51bGwgJiYgb3B0aW9ucy5maWx0ZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgb3B0aW9ucy5maWx0ZXJzLmZvckVhY2goZiA9PiB7XHJcbiAgICAgICAgbGV0IGZpbHRlcjogYW55ID0ge307XHJcbiAgICAgICAgT2JqZWN0LmtleXMoZikuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgaWYgKGZba2V5XSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZpbHRlcltrZXldID0gZltrZXldO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghaXNFbXB0eShmaWx0ZXIpKSB7XHJcbiAgICAgICAgICBmaWx0ZXJzLnB1c2goZmlsdGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKGZpbHRlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJlcU9wdGlvbnMgPSB7IGZpbHRlcnM6IGZpbHRlcnMgfTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVxT3B0aW9ucyA9IHsgZmlsdGVyczogW10gfTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYXV0aG9yaXplZERldmljZSA9IGF3YWl0IHRoaXMudXNiLnJlcXVlc3REZXZpY2UocmVxT3B0aW9ucyk7XHJcbiAgICBsZXQgdXNiRGV2aWNlID0gUGFyc2VVU0JEZXZpY2UoYXV0aG9yaXplZERldmljZSk7XHJcbiAgICB0aGlzLl9mb3VuZERldmljZXMucHVzaChhdXRob3JpemVkRGV2aWNlKTtcclxuICAgIHJldHVybiB1c2JEZXZpY2U7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgT3BlbkRldmljZSA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kKTogUHJvbWlzZTxVU0JEZXZpY2VGb3VuZD4gPT4ge1xyXG4gICAgbGV0IHVzYkRldmljZSA9IHRoaXMuR2V0VVNCRGV2aWNlKGRldmljZSk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKCF1c2JEZXZpY2UpIHJldHVybiByZWplY3QoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcclxuICAgICAgdXNiRGV2aWNlLm9wZW4oKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIGxldCBwYXJzZWQgPSBQYXJzZVVTQkRldmljZSh1c2JEZXZpY2UpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocGFyc2VkKTtcclxuICAgICAgICAgIHJlc29sdmUocGFyc2VkKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgQ2xvc2VEZXZpY2UgPSAoZGV2aWNlOiBVU0JEZXZpY2VGb3VuZCk6IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+ID0+IHtcclxuICAgIGxldCB1c2JEZXZpY2UgPSB0aGlzLkdldFVTQkRldmljZShkZXZpY2UpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFVTQkRldmljZUZvdW5kPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdXNiRGV2aWNlKSByZXR1cm4gcmVqZWN0KFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XHJcbiAgICAgIHVzYkRldmljZS5jbG9zZSgpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZShQYXJzZVVTQkRldmljZSh1c2JEZXZpY2UpKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgUmVzZXREZXZpY2UgPSAoZGV2aWNlOiBVU0JEZXZpY2VGb3VuZCk6IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+ID0+IHtcclxuICAgIGxldCB1c2JEZXZpY2UgPSB0aGlzLkdldFVTQkRldmljZShkZXZpY2UpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFVTQkRldmljZUZvdW5kPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdXNiRGV2aWNlKSByZXR1cm4gcmVqZWN0KFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XHJcbiAgICAgIHVzYkRldmljZS5yZXNldCgpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZShQYXJzZVVTQkRldmljZSh1c2JEZXZpY2UpKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgU2VsZWN0Q29uZmlndXJhdGlvbiA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kLCBjb25maWd1cmF0aW9uVmFsdWU6IG51bWJlcik6IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+ID0+IHtcclxuICAgIGxldCB1c2JEZXZpY2UgPSB0aGlzLkdldFVTQkRldmljZShkZXZpY2UpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFVTQkRldmljZUZvdW5kPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdXNiRGV2aWNlKSByZXR1cm4gcmVqZWN0KFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XHJcbiAgICAgIGNvbnNvbGUubG9nKGNvbmZpZ3VyYXRpb25WYWx1ZSk7XHJcbiAgICAgIHVzYkRldmljZS5zZWxlY3RDb25maWd1cmF0aW9uKGNvbmZpZ3VyYXRpb25WYWx1ZSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICByZXNvbHZlKFBhcnNlVVNCRGV2aWNlKHVzYkRldmljZSkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiByZWplY3QoZXJyKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBDbGFpbUludGVyZmFjZSA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kLCBpbnRlcmZhY2VOdW1iZXI6IG51bWJlcik6IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+ID0+IHtcclxuICAgIGxldCB1c2JEZXZpY2UgPSB0aGlzLkdldFVTQkRldmljZShkZXZpY2UpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFVTQkRldmljZUZvdW5kPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdXNiRGV2aWNlKSByZXR1cm4gcmVqZWN0KFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XHJcblxyXG4gICAgICB1c2JEZXZpY2UuY2xhaW1JbnRlcmZhY2UoaW50ZXJmYWNlTnVtYmVyKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoUGFyc2VVU0JEZXZpY2UodXNiRGV2aWNlKSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFJlbGVhc2VJbnRlcmZhY2UgPSAoZGV2aWNlOiBVU0JEZXZpY2VGb3VuZCwgaW50ZXJmYWNlTnVtYmVyOiBudW1iZXIpOiBQcm9taXNlPFVTQkRldmljZUZvdW5kPiA9PiB7XHJcbiAgICBsZXQgdXNiRGV2aWNlID0gdGhpcy5HZXRVU0JEZXZpY2UoZGV2aWNlKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxVU0JEZXZpY2VGb3VuZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAoIXVzYkRldmljZSkgcmV0dXJuIHJlamVjdChcIkRldmljZSBub3QgY29ubmVjdGVkXCIpO1xyXG5cclxuICAgICAgdXNiRGV2aWNlLnJlbGVhc2VJbnRlcmZhY2UoaW50ZXJmYWNlTnVtYmVyKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoUGFyc2VVU0JEZXZpY2UodXNiRGV2aWNlKSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIFNlbGVjdEFsdGVybmF0ZUludGVyZmFjZSA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kLCBpbnRlcmZhY2VOdW1iZXI6IG51bWJlciwgYWx0ZXJuYXRlU2V0dGluZzogbnVtYmVyKTogUHJvbWlzZTxVU0JEZXZpY2VGb3VuZD4gPT4ge1xyXG4gICAgbGV0IHVzYkRldmljZSA9IHRoaXMuR2V0VVNCRGV2aWNlKGRldmljZSk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKCF1c2JEZXZpY2UpIHJldHVybiByZWplY3QoXCJEZXZpY2Ugbm90IGNvbm5lY3RlZFwiKTtcclxuXHJcbiAgICAgIHVzYkRldmljZS5zZWxlY3RBbHRlcm5hdGVJbnRlcmZhY2UoaW50ZXJmYWNlTnVtYmVyLCBhbHRlcm5hdGVTZXR0aW5nKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoUGFyc2VVU0JEZXZpY2UodXNiRGV2aWNlKSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHJlamVjdChlcnIpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIENsZWFySGFsdCA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kLCBkaXJlY3Rpb246IFVTQkRpcmVjdGlvbiwgZW5kcG9pbnROdW1iZXI6IG51bWJlcik6IFByb21pc2U8VVNCRGV2aWNlRm91bmQ+ID0+IHtcclxuICAgIGxldCB1c2JEZXZpY2UgPSB0aGlzLkdldFVTQkRldmljZShkZXZpY2UpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFVTQkRldmljZUZvdW5kPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdXNiRGV2aWNlKSByZXR1cm4gcmVqZWN0KFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XHJcblxyXG4gICAgICB1c2JEZXZpY2UuY2xlYXJIYWx0KGRpcmVjdGlvbiwgZW5kcG9pbnROdW1iZXIpXHJcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZShQYXJzZVVTQkRldmljZSh1c2JEZXZpY2UpKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgVHJhbnNmZXJJbiA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kLCBlbmRwb2ludE51bWJlcjogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IFByb21pc2U8VVNCSW5UcmFuc2ZlclJlc3VsdD4gPT4ge1xyXG4gICAgbGV0IHVzYkRldmljZSA9IHRoaXMuR2V0VVNCRGV2aWNlKGRldmljZSk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8VVNCSW5UcmFuc2ZlclJlc3VsdD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAoIXVzYkRldmljZSkgcmV0dXJuIHJlamVjdChcIkRldmljZSBub3QgY29ubmVjdGVkXCIpO1xyXG5cclxuICAgICAgdXNiRGV2aWNlLnRyYW5zZmVySW4oZW5kcG9pbnROdW1iZXIsIGxlbmd0aClcclxuICAgICAgICAudGhlbihvdXQgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuQnVmZmVyVG9CYXNlNjQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobmV3IFVpbnQ4QXJyYXkob3V0LmRhdGEuYnVmZmVyKSkpLCAvLyBIYWNrIHRvIHN1cHBvcnQgVWludDhBcnJheSB0byBieXRlW10gc2VyaWFsaXphdGlvbi5cclxuICAgICAgICAgICAgc3RhdHVzOiBvdXQuc3RhdHVzXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBUcmFuc2Zlck91dCA9IChkZXZpY2U6IFVTQkRldmljZUZvdW5kLCBlbmRwb2ludE51bWJlcjogbnVtYmVyLCBkYXRhOiBzdHJpbmcpOiBQcm9taXNlPFVTQk91dFRyYW5zZmVyUmVzdWx0PiA9PiB7XHJcbiAgICBsZXQgdXNiRGV2aWNlID0gdGhpcy5HZXRVU0JEZXZpY2UoZGV2aWNlKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxVU0JPdXRUcmFuc2ZlclJlc3VsdD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAoIXVzYkRldmljZSkgcmV0dXJuIHJlamVjdChcIkRldmljZSBub3QgY29ubmVjdGVkXCIpO1xyXG4gICAgICBjb25zdCBidWZmZXIgPSB0aGlzLkJhc2U2NFRvQnVmZmVyKGRhdGEpO1xyXG5cclxuICAgICAgdXNiRGV2aWNlLnRyYW5zZmVyT3V0KGVuZHBvaW50TnVtYmVyLCBidWZmZXIpXHJcbiAgICAgICAgLnRoZW4ob3V0ID0+IHtcclxuICAgICAgICAgIHJlc29sdmUoe1xyXG4gICAgICAgICAgICBieXRlc1dyaXR0ZW46IG91dC5ieXRlc1dyaXR0ZW4sXHJcbiAgICAgICAgICAgIHN0YXR1czogb3V0LnN0YXR1c1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgQ29udHJvbFRyYW5zZmVySW4gPSAoZGV2aWNlOiBVU0JEZXZpY2VGb3VuZCwgc2V0dXA6IFVTQkNvbnRyb2xUcmFuc2ZlclBhcmFtZXRlcnMsIGxlbmd0aDogbnVtYmVyKTogUHJvbWlzZTxVU0JJblRyYW5zZmVyUmVzdWx0PiA9PiB7XHJcbiAgICBsZXQgdXNiRGV2aWNlID0gdGhpcy5HZXRVU0JEZXZpY2UoZGV2aWNlKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxVU0JJblRyYW5zZmVyUmVzdWx0PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdXNiRGV2aWNlKSByZXR1cm4gcmVqZWN0KFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XHJcblxyXG4gICAgICB1c2JEZXZpY2UuQ29udHJvbFRyYW5zZmVySW4oc2V0dXAsIGxlbmd0aClcclxuICAgICAgICAudGhlbihvdXQgPT4ge1xyXG4gICAgICAgICAgcmVzb2x2ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHRoaXMuQnVmZmVyVG9CYXNlNjQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobmV3IFVpbnQ4QXJyYXkob3V0LmRhdGEuYnVmZmVyKSkpLCAvLyBIYWNrIHRvIHN1cHBvcnQgVWludDhBcnJheSB0byBieXRlW10gc2VyaWFsaXphdGlvbi5cclxuICAgICAgICAgICAgc3RhdHVzOiBvdXQuc3RhdHVzXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBDb250cm9sVHJhbnNmZXJPdXQgPSAoZGV2aWNlOiBVU0JEZXZpY2VGb3VuZCwgc2V0dXA6IFVTQkNvbnRyb2xUcmFuc2ZlclBhcmFtZXRlcnMsIGRhdGE6IHN0cmluZyk6IFByb21pc2U8VVNCT3V0VHJhbnNmZXJSZXN1bHQ+ID0+IHtcclxuICAgIGxldCB1c2JEZXZpY2UgPSB0aGlzLkdldFVTQkRldmljZShkZXZpY2UpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPFVTQk91dFRyYW5zZmVyUmVzdWx0PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdXNiRGV2aWNlKSByZXR1cm4gcmVqZWN0KFwiRGV2aWNlIG5vdCBjb25uZWN0ZWRcIik7XHJcbiAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuQmFzZTY0VG9CdWZmZXIoZGF0YSk7XHJcblxyXG4gICAgICB1c2JEZXZpY2UuY29udHJvbFRyYW5zZmVyT3V0KHNldHVwLCBidWZmZXIpXHJcbiAgICAgICAgLnRoZW4ob3V0ID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKG91dCk7XHJcbiAgICAgICAgICByZXNvbHZlKHtcclxuICAgICAgICAgICAgYnl0ZXNXcml0dGVuOiBvdXQuYnl0ZXNXcml0dGVuLFxyXG4gICAgICAgICAgICBzdGF0dXM6IG91dC5zdGF0dXNcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBHZXRVU0JEZXZpY2UgPSAoZGV2aWNlOiBVU0JEZXZpY2VGb3VuZCk6IGFueSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5fZm91bmREZXZpY2VzLmZpbmQoXHJcbiAgICAgIGQgPT4gZC52ZW5kb3JJZCA9PSBkZXZpY2UudmVuZG9ySWQgJiZcclxuICAgICAgICBkLnByb2R1Y3RJZCA9PSBkZXZpY2UucHJvZHVjdElkICYmXHJcbiAgICAgICAgZC5kZXZpY2VDbGFzcyA9PSBkZXZpY2UuZGV2aWNlQ2xhc3MgJiZcclxuICAgICAgICBkLnNlcmlhbE51bWJlciA9PSBkZXZpY2Uuc2VyaWFsTnVtYmVyKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgQ29ubmVjdGlvblN0YXRlQ2hhbmdlZENhbGxiYWNrID0gKGV2ZW50OiBhbnkpID0+IHtcclxuICAgIGlmICghdGhpcy5fdXNiUmVmZXJlbmNlKSByZXR1cm47XHJcbiAgICBsZXQgbWV0aG9kOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIGxldCB1c2JEZXZpY2UgPSB0aGlzLkdldFVTQkRldmljZShldmVudC5kZXZpY2UpO1xyXG5cclxuICAgIGlmIChldmVudC50eXBlID09IFwiZGlzY29ubmVjdFwiKSB7XHJcbiAgICAgIG1ldGhvZCA9IFwiT25EaXNjb25uZWN0XCI7XHJcbiAgICAgIHRoaXMuX2ZvdW5kRGV2aWNlcyA9IHRoaXMuX2ZvdW5kRGV2aWNlcy5maWx0ZXIoKGQsIGluZGV4LCBhcnIpID0+IHtcclxuICAgICAgICByZXR1cm4gZC52ZW5kb3JJZCAhPSB1c2JEZXZpY2UudmVuZG9ySWQgJiZcclxuICAgICAgICAgIGQucHJvZHVjdElkICE9IHVzYkRldmljZS5wcm9kdWN0SWQgJiZcclxuICAgICAgICAgIGQuZGV2aWNlQ2xhc3MgIT0gdXNiRGV2aWNlLmRldmljZUNsYXNzICYmXHJcbiAgICAgICAgICBkLnNlcmlhbE51bWJlciAhPSB1c2JEZXZpY2Uuc2VyaWFsTnVtYmVyO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT0gXCJjb25uZWN0XCIpIHtcclxuICAgICAgbWV0aG9kID0gXCJPbkNvbm5lY3RcIjtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oZXZlbnQpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fdXNiUmVmZXJlbmNlLmludm9rZU1ldGhvZEFzeW5jKG1ldGhvZCwgUGFyc2VVU0JEZXZpY2UoZXZlbnQuZGV2aWNlKSk7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgUmVnaXN0ZXJVU0JFdmVudHMgPSAodXNiOiBEb3ROZXRSZWZlcmVuY2VUeXBlKSA9PiB7XHJcbiAgICB0aGlzLl91c2JSZWZlcmVuY2UgPSB1c2I7XHJcbiAgICAvL1RPRE86IENoZWNrIHdoeSB0aGlzIGV2ZW50IGlzIG5vdCBjb25zaXN0ZW50bHkgYmVpbmcgZmlyZWQuXHJcbiAgICBpZiAoIXRoaXMuX2V2ZW50c1JlZ2lzdGVyZWQpIHtcclxuICAgICAgdGhpcy51c2IuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3RcIiwgdGhpcy5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkQ2FsbGJhY2spO1xyXG4gICAgICB0aGlzLnVzYi5hZGRFdmVudExpc3RlbmVyKFwiZGlzY29ubmVjdFwiLCB0aGlzLkNvbm5lY3Rpb25TdGF0ZUNoYW5nZWRDYWxsYmFjayk7XHJcbiAgICAgIHRoaXMuX2V2ZW50c1JlZ2lzdGVyZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIFJlbW92ZVVTQkV2ZW50cyA9ICh1c2I6IERvdE5ldFJlZmVyZW5jZVR5cGUpID0+IHtcclxuICAgIGlmICh0aGlzLl9ldmVudHNSZWdpc3RlcmVkKSB7XHJcbiAgICAgIHRoaXMudXNiLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjb25uZWN0XCIsIHRoaXMuQ29ubmVjdGlvblN0YXRlQ2hhbmdlZENhbGxiYWNrKTtcclxuICAgICAgdGhpcy51c2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpc2Nvbm5lY3RcIiwgdGhpcy5Db25uZWN0aW9uU3RhdGVDaGFuZ2VkQ2FsbGJhY2spO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBCdWZmZXJUb0Jhc2U2NCA9IChidWYpID0+IHtcclxuICAgIHZhciBiaW5zdHIgPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoYnVmLCAoY2gpID0+IHtcclxuICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2gpO1xyXG4gICAgfSkuam9pbignJyk7XHJcbiAgICByZXR1cm4gYnRvYShiaW5zdHIpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBCYXNlNjRUb0J1ZmZlciA9IChiYXNlNjQ6IHN0cmluZykgPT4ge1xyXG4gICAgdmFyIGJpbnN0ciA9IGF0b2IoYmFzZTY0KTtcclxuICAgIHZhciBidWYgPSBuZXcgVWludDhBcnJheShiaW5zdHIubGVuZ3RoKTtcclxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYmluc3RyLCAoY2gsIGkpID0+IHtcclxuICAgICAgYnVmW2ldID0gY2guY2hhckNvZGVBdCgwKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGJ1ZjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGludGVyZmFjZSBVU0JEZXZpY2VGb3VuZCB7XG4gICAgdXNiVmVyc2lvbk1ham9yOiBudW1iZXIsXG4gICAgdXNiVmVyc2lvbk1pbm9yOiBudW1iZXIsXG4gICAgdXNiVmVyc2lvblN1Ym1pbm9yOiBudW1iZXIsXG4gICAgZGV2aWNlQ2xhc3M6IG51bWJlcixcbiAgICBkZXZpY2VTdWJjbGFzczogbnVtYmVyLFxuICAgIGRldmljZVByb3RvY29sOiBudW1iZXIsXG4gICAgdmVuZG9ySWQ6IG51bWJlcixcbiAgICBwcm9kdWN0SWQ6IG51bWJlcixcbiAgICBkZXZpY2VWZXJzaW9uTWFqb3I6IG51bWJlcixcbiAgICBkZXZpY2VWZXJzaW9uTWlub3I6IG51bWJlcixcbiAgICBkZXZpY2VWZXJzaW9uU3VibWlub3I6IG51bWJlcixcbiAgICBtYW51ZmFjdHVyZXJOYW1lOiBzdHJpbmcsXG4gICAgcHJvZHVjdE5hbWU6IHN0cmluZyxcbiAgICBzZXJpYWxOdW1iZXI6IHN0cmluZyxcbiAgICBjb25maWd1cmF0aW9uOiBVU0JDb25maWd1cmF0aW9uIHwgbnVsbCxcbiAgICBjb25maWd1cmF0aW9uczogVVNCQ29uZmlndXJhdGlvbltdLFxuICAgIG9wZW5lZDogYm9vbGVhblxufVxuZXhwb3J0IGludGVyZmFjZSBVU0JDb25maWd1cmF0aW9uIHsgY29uZmlndXJhdGlvblZhbHVlOiBudW1iZXIsIGNvbmZpZ3VyYXRpb25OYW1lOiBzdHJpbmcsIGludGVyZmFjZXM6IFVTQkludGVyZmFjZVtdIH1cbmV4cG9ydCBpbnRlcmZhY2UgVVNCSW50ZXJmYWNlIHsgaW50ZXJmYWNlTnVtYmVyOiBudW1iZXIsIGFsdGVybmF0ZTogVVNCQWx0ZXJuYXRlSW50ZXJmYWNlIHwgbnVsbCwgYWx0ZXJuYXRlczogVVNCQWx0ZXJuYXRlSW50ZXJmYWNlW10sIGNsYWltZWQ6IGJvb2xlYW4gfVxuZXhwb3J0IGludGVyZmFjZSBVU0JBbHRlcm5hdGVJbnRlcmZhY2UgeyBhbHRlcm5hdGVTZXR0aW5nOiBudW1iZXIsIGludGVyZmFjZUNsYXNzOiBudW1iZXIsIGludGVyZmFjZVN1YmNsYXNzOiBudW1iZXIsIGludGVyZmFjZVByb3RvY29sOiBudW1iZXIsIGludGVyZmFjZU5hbWU6IHN0cmluZywgZW5kcG9pbnRzOiBVU0JFbmRwb2ludFtdIH1cbmV4cG9ydCBpbnRlcmZhY2UgVVNCRGV2aWNlRmlsdGVyIHsgdmVuZG9ySWQ6IG51bWJlciwgcHJvZHVjdElkOiBudW1iZXIsIGNsYXNzQ29kZTogYW55LCBzdWJDbGFzc0NvZGU6IGFueSwgcHJvdG9jb2xDb2RlOiBhbnksIHNlcmlhbE51bWJlcjogc3RyaW5nIH1cbmV4cG9ydCBpbnRlcmZhY2UgVVNCUmVxdWVzdERldmljZU9wdGlvbnMgeyBmaWx0ZXJzOiBVU0JEZXZpY2VGaWx0ZXJbXSB9XG5leHBvcnQgaW50ZXJmYWNlIFVTQkVuZHBvaW50IHsgZW5kcG9pbnROdW1iZXI6IG51bWJlciwgZGlyZWN0aW9uOiBVU0JEaXJlY3Rpb24sIHR5cGU6IFVTQkVuZHBvaW50VHlwZSwgcGFja2V0U2l6ZTogbnVtYmVyIH1cbmV4cG9ydCBpbnRlcmZhY2UgVVNCVHJhbnNmZXJSZXN1bHQgeyBzdGF0dXM6IFVTQlRyYW5zZmVyU3RhdHVzIH1cbmV4cG9ydCBpbnRlcmZhY2UgVVNCSW5UcmFuc2ZlclJlc3VsdCBleHRlbmRzIFVTQlRyYW5zZmVyUmVzdWx0IHsgZGF0YTogYW55IH1cbmV4cG9ydCBpbnRlcmZhY2UgVVNCT3V0VHJhbnNmZXJSZXN1bHQgZXh0ZW5kcyBVU0JUcmFuc2ZlclJlc3VsdCB7IGJ5dGVzV3JpdHRlbjogbnVtYmVyIH1cbmV4cG9ydCBpbnRlcmZhY2UgVVNCQ29udHJvbFRyYW5zZmVyUGFyYW1ldGVycyB7IHJlcXVlc3RUeXBlOiBVU0JSZXF1ZXN0VHlwZSwgcmVjaXBpZW50OiBVU0JSZWNpcGllbnQsIHJlcXVlc3Q6IG51bWJlciwgdmFsdWU6IG51bWJlciwgaW5kZXg6IG51bWJlciB9XG5cbmV4cG9ydCBlbnVtIFVTQkRpcmVjdGlvbiB7IFwiaW5cIiwgXCJvdXRcIiB9XG5leHBvcnQgZW51bSBVU0JFbmRwb2ludFR5cGUgeyBcImJ1bGtcIiwgXCJpbnRlcnJ1cHRcIiwgXCJpc29jaHJvbm91c1wiIH1cbmV4cG9ydCBlbnVtIFVTQlRyYW5zZmVyU3RhdHVzIHsgXCJva1wiLCBcInN0YWxsXCIsIFwiYmFiYmxlXCIgfVxuZXhwb3J0IGVudW0gVVNCUmVxdWVzdFR5cGUgeyBcInN0YW5kYXJkXCIsIFwiY2xhc3NcIiwgXCJ2ZW5kb3JcIiB9XG5leHBvcnQgZW51bSBVU0JSZWNpcGllbnQgeyBcImRldmljZVwiLCBcImludGVyZmFjZVwiLCBcImVuZHBvaW50XCIsIFwib3RoZXJcIiB9XG5cbmV4cG9ydCBmdW5jdGlvbiBQYXJzZVVTQkRldmljZShyYXdEZXZpY2U6IGFueSk6IFVTQkRldmljZUZvdW5kIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB1c2JWZXJzaW9uTWFqb3I6IHJhd0RldmljZS51c2JWZXJzaW9uTWFqb3IsXG4gICAgICAgIHVzYlZlcnNpb25NaW5vcjogcmF3RGV2aWNlLnVzYlZlcnNpb25NaW5vcixcbiAgICAgICAgdXNiVmVyc2lvblN1Ym1pbm9yOiByYXdEZXZpY2UudXNiVmVyc2lvblN1Ym1pbm9yLFxuICAgICAgICBkZXZpY2VDbGFzczogcmF3RGV2aWNlLmRldmljZUNsYXNzLFxuICAgICAgICBkZXZpY2VTdWJjbGFzczogcmF3RGV2aWNlLmRldmljZVN1YmNsYXNzLFxuICAgICAgICBkZXZpY2VQcm90b2NvbDogcmF3RGV2aWNlLmRldmljZVByb3RvY29sLFxuICAgICAgICB2ZW5kb3JJZDogcmF3RGV2aWNlLnZlbmRvcklkLFxuICAgICAgICBwcm9kdWN0SWQ6IHJhd0RldmljZS5wcm9kdWN0SWQsXG4gICAgICAgIGRldmljZVZlcnNpb25NYWpvcjogcmF3RGV2aWNlLmRldmljZVZlcnNpb25NYWpvcixcbiAgICAgICAgZGV2aWNlVmVyc2lvbk1pbm9yOiByYXdEZXZpY2UuZGV2aWNlVmVyc2lvbk1pbm9yLFxuICAgICAgICBkZXZpY2VWZXJzaW9uU3VibWlub3I6IHJhd0RldmljZS5kZXZpY2VWZXJzaW9uU3VibWlub3IsXG4gICAgICAgIG1hbnVmYWN0dXJlck5hbWU6IHJhd0RldmljZS5tYW51ZmFjdHVyZXJOYW1lLFxuICAgICAgICBwcm9kdWN0TmFtZTogcmF3RGV2aWNlLnByb2R1Y3ROYW1lLFxuICAgICAgICBzZXJpYWxOdW1iZXI6IHJhd0RldmljZS5zZXJpYWxOdW1iZXIsXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IHJhd0RldmljZS5jb25maWd1cmF0aW9uICE9IG51bGwgPyBQYXJzZVVTQkNvbmZpZ3VyYXRpb24ocmF3RGV2aWNlLmNvbmZpZ3VyYXRpb24pIDogbnVsbCxcbiAgICAgICAgY29uZmlndXJhdGlvbnM6IHJhd0RldmljZS5jb25maWd1cmF0aW9ucy5tYXAocmF3ID0+IFBhcnNlVVNCQ29uZmlndXJhdGlvbihyYXcpKSxcbiAgICAgICAgb3BlbmVkOiByYXdEZXZpY2Uub3BlbmVkXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gUGFyc2VVU0JDb25maWd1cmF0aW9uKHJhd0NvbmZpZ3VyYXRpb246IGFueSk6IFVTQkNvbmZpZ3VyYXRpb24ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmZpZ3VyYXRpb25WYWx1ZTogcmF3Q29uZmlndXJhdGlvbi5jb25maWd1cmF0aW9uVmFsdWUsXG4gICAgICAgIGNvbmZpZ3VyYXRpb25OYW1lOiByYXdDb25maWd1cmF0aW9uLmNvbmZpZ3VyYXRpb25OYW1lLFxuICAgICAgICBpbnRlcmZhY2VzOiByYXdDb25maWd1cmF0aW9uLmludGVyZmFjZXMubWFwKHJhdyA9PiBQYXJzZVVTQkludGVyZmFjZShyYXcpKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIFBhcnNlVVNCSW50ZXJmYWNlKHJhd0ludGVyZmFjZTogYW55KTogVVNCSW50ZXJmYWNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnRlcmZhY2VOdW1iZXI6IHJhd0ludGVyZmFjZS5pbnRlcmZhY2VOdW1iZXIsXG4gICAgICAgIGFsdGVybmF0ZTogcmF3SW50ZXJmYWNlLmFsdGVybmF0ZSA/IFBhcnNlVVNCQWx0ZXJuYXRlSW50ZXJmYWNlKHJhd0ludGVyZmFjZS5hbHRlcm5hdGUpIDogbnVsbCxcbiAgICAgICAgYWx0ZXJuYXRlczogcmF3SW50ZXJmYWNlLmFsdGVybmF0ZXMubWFwKHJhdyA9PiBQYXJzZVVTQkFsdGVybmF0ZUludGVyZmFjZShyYXcpKSxcbiAgICAgICAgY2xhaW1lZDogcmF3SW50ZXJmYWNlLmNsYWltZWRcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBQYXJzZVVTQkFsdGVybmF0ZUludGVyZmFjZShyYXdBbHRlcm5hdGU6IGFueSk6IFVTQkFsdGVybmF0ZUludGVyZmFjZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWx0ZXJuYXRlU2V0dGluZzogcmF3QWx0ZXJuYXRlLmFsdGVybmF0ZVNldHRpbmcsXG4gICAgICAgIGludGVyZmFjZUNsYXNzOiByYXdBbHRlcm5hdGUuaW50ZXJmYWNlQ2xhc3MsXG4gICAgICAgIGludGVyZmFjZVN1YmNsYXNzOiByYXdBbHRlcm5hdGUuaW50ZXJmYWNlU3ViY2xhc3MsXG4gICAgICAgIGludGVyZmFjZVByb3RvY29sOiByYXdBbHRlcm5hdGUuaW50ZXJmYWNlUHJvdG9jb2wsXG4gICAgICAgIGludGVyZmFjZU5hbWU6IHJhd0FsdGVybmF0ZS5pbnRlcmZhY2VOYW1lLFxuICAgICAgICBlbmRwb2ludHM6IHJhd0FsdGVybmF0ZS5lbmRwb2ludHMubWFwKHJhdyA9PiBQYXJzZVVTQkVuZHBvaW50KHJhdykpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gUGFyc2VVU0JFbmRwb2ludChyYXdFbmRwb2ludDogYW55KTogVVNCRW5kcG9pbnQge1xuICAgIHJldHVybiB7XG4gICAgICAgIGVuZHBvaW50TnVtYmVyOiByYXdFbmRwb2ludC5lbmRwb2ludE51bWJlcixcbiAgICAgICAgZGlyZWN0aW9uOiA8VVNCRGlyZWN0aW9uPnJhd0VuZHBvaW50LmRpcmVjdGlvbixcbiAgICAgICAgdHlwZTogPFVTQkVuZHBvaW50VHlwZT5yYXdFbmRwb2ludC50eXBlLFxuICAgICAgICBwYWNrZXRTaXplOiByYXdFbmRwb2ludC5wYWNrZXRTaXplXG4gICAgfTtcbn0iXSwic291cmNlUm9vdCI6IiJ9